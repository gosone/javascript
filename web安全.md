## Token
Token是服务端生成的一串字符串，以作客户端进行请求的一个令牌，当第一次登录后，服务器生成一个Token便将此Token返回给客户端，以后客户端只需带上这个Token前来请求数据即可，无需再次带上用户名和密码。最简单的token组成:uid(用户唯一的身份标识)、time(当前时间的时间戳)、sign(签名，由token的前几位+盐以哈希算法压缩成一定长的十六进制字符串，可以防止恶意第三方拼接token请求服务器)。
* 客户端使用用户名跟密码请求登录
* 服务端收到请求，去验证用户名与密码
* 验证成功后，服务端会签发一个 Token，再把这个 Token 发送给客户端
* 客户端收到 Token 以后可以把它存储起来，比如放在 Cookie 里或者 Local Storage 里
* 客户端每次向服务端请求资源的时候需要带着服务端签发的 Token
* 服务端收到请求，然后去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据

## CSRF攻击
1. 跨站请求伪造：攻击者盗用你的身份，以你的名义发送恶意请求
2. 登录信任网站，并且在本地生成`cookie`，在不登出A的情况下，访问危险网站B，由于发送请求自动携带cookie
3. 如何预防：
* 关键操作只接受post请求
* set-cookie为httponly，客户端访问无法带上cookie
* 验证码
* 检测referer：之前的网址一定保留在新页面中Referer属性中
* token：主流做法，恶意网站无法获得token

## XSS攻击
跨站脚本攻击：向有XSS漏洞的网站中输入恶意的HTML代码，当其他用户浏览该网站时，该段html代码会自动执行，从而达到攻击的目的，如盗取cookie，破坏页面结构，重定向到其他网站等。
1. XSS类型：
* 持久性XSS：对客户端攻击的脚本植入到服务器上，从而导致每个正常访问到的用户都会遭到这段XSS脚本的攻击
* 非持久性XSS：对一个页面的URL中的某个参数做文章，把静心构造好的恶意脚本包装在URL参数中，再将这个URL发布到网上，骗取用户访问，从而进行攻击。
2. 如何防御XSS攻击？
* 如果不允许用户输入html，则直接对输入的html进行转义
* 如果允许输入html的话，则将用户的输入使用HTML解析库进行解析，获取其中的数据。然后根据用户原有的标签属性，重新构建HTML元素树。构建过程中，所有的标签、属性都只从白名单中拿取。
